"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5762],{421:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var n=s(20629),i=s(74865),a=s.n(i);const o={computed:(0,n.Se)(["currentUserPermissions","currentUser"]),metaInfo:{title:"Detail Quotation"},data:function(){return{isLoading:!0,quote:{},details:[],variants:[],company:{},email:{to:"",subject:"",message:"",client_name:"",Quote_Ref:""}}},methods:{print:function(){this.$htmlToPaper("print_Invoice")},Quote_PDF:function(){var t=this;a().start(),a().set(.1);var e=this.$route.params.id;axios.get("Quote_PDF/".concat(e),{responseType:"blob",headers:{"Content-Type":"application/json"}}).then((function(e){var s=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=s,n.setAttribute("download","Quotation_"+t.quote.Ref+".pdf"),document.body.appendChild(n),n.click(),setTimeout((function(){return a().done()}),500)})).catch((function(){setTimeout((function(){return a().done()}),500)}))},formatNumber:function(t,e){var s=("string"==typeof t?t:t.toString()).split(".");if(e<=0)return s[0];var n=s[1]||"";if(n.length>e)return"".concat(s[0],".").concat(n.substr(0,e));for(;n.length<e;)n+="0";return"".concat(s[0],".").concat(n)},Get_Details:function(){var t=this,e=this.$route.params.id;axios.get("quotations/".concat(e)).then((function(e){t.quote=e.data.quote,t.details=e.data.details,t.company=e.data.company,t.isLoading=!1})).catch((function(e){setTimeout((function(){t.isLoading=!1}),500)}))},makeToast:function(t,e,s){this.$root.$bvToast.toast(e,{title:s,variant:t,solid:!0})},Quote_Email:function(){this.email.to=this.quote.client_email,this.email.Quote_Ref=this.quote.Ref,this.email.client_name=this.quote.client_name,this.SendEmail()},SendEmail:function(){var t=this;a().start(),a().set(.1);var e=this.$route.params.id;axios.post("quotations/sendQuote/email",{id:e,to:this.email.to,client_name:this.email.client_name,Ref:this.email.Quote_Ref}).then((function(e){setTimeout((function(){return a().done()}),500),t.makeToast("success",t.$t("Send.TitleEmail"),t.$t("Success"))})).catch((function(e){setTimeout((function(){return a().done()}),500),t.makeToast("danger",t.$t("SMTPIncorrect"),t.$t("Failed"))}))},Quote_SMS:function(){var t=this;a().start(),a().set(.1);var e=this.$route.params.id;axios.post("quotations/send/sms",{id:e}).then((function(e){setTimeout((function(){return a().done()}),500),t.makeToast("success",t.$t("Send_SMS"),t.$t("Success"))})).catch((function(e){setTimeout((function(){return a().done()}),500),t.makeToast("danger",t.$t("sms_config_invalid"),t.$t("Failed"))}))},Remove_Quote:function(){var t=this,e=this.$route.params.id;this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((function(s){s.value&&axios.delete("quotations/"+e).then((function(){t.$swal(t.$t("Delete.Deleted"),t.$t("Delete.QuoteDeleted"),"success"),t.$router.push({name:"index_quotation"})})).catch((function(){t.$swal(t.$t("Delete.Failed"),t.$t("Delete.Therewassomethingwronge"),"warning")}))}))}},created:function(){this.Get_Details()}};const r=(0,s(51900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-content"},[s("breadcumb",{attrs:{page:t.$t("DetailQuote"),folder:t.$t("ListQuotations")}}),t._v(" "),t.isLoading?s("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.isLoading?t._e():s("b-card",[s("b-row",[s("b-col",{staticClass:"mb-5",attrs:{md:"12"}},[t.currentUserPermissions&&t.currentUserPermissions.includes("Quotations_edit")?s("router-link",{staticClass:"btn-sm btn btn-success ripple btn-icon m-1",attrs:{title:"Edit",to:{name:"edit_quotation",params:{id:t.$route.params.id}}}},[s("i",{staticClass:"i-Edit"}),t._v(" "),s("span",[t._v(t._s(t.$t("EditQuote")))])]):t._e(),t._v(" "),t.quote.statut&&t.currentUserPermissions&&t.currentUserPermissions.includes("Quotations_edit")?s("router-link",{staticClass:"btn-sm btn btn-primary ripple btn-icon m-1",attrs:{title:"Create",to:{name:"change_to_sale",params:{id:t.$route.params.id}}}},[s("i",{staticClass:"i-Add"}),t._v(" "),s("span",[t._v(t._s(t.$t("CreateSale")))])]):t._e(),t._v(" "),s("button",{staticClass:"btn-sm btn btn-info ripple btn-icon m-1",on:{click:function(e){return t.Quote_Email()}}},[s("i",{staticClass:"i-Envelope-2"}),t._v("\n          "+t._s(t.$t("Email"))+"\n        ")]),t._v(" "),s("button",{staticClass:"btn btn-secondary btn-icon ripple btn-sm",on:{click:function(e){return t.Quote_SMS()}}},[s("i",{staticClass:"i-Speach-Bubble"}),t._v("\n          SMS\n        ")]),t._v(" "),s("button",{staticClass:"btn-sm btn btn-light ripple btn-icon m-1",on:{click:function(e){return t.Quote_PDF()}}},[s("i",{staticClass:"i-File-TXT"}),t._v(" PDF\n        ")]),t._v(" "),s("button",{staticClass:"btn-sm btn btn-warning ripple btn-icon m-1",on:{click:function(e){return t.print()}}},[s("i",{staticClass:"i-Billing"}),t._v("\n          "+t._s(t.$t("print"))+"\n        ")]),t._v(" "),t.currentUserPermissions&&t.currentUserPermissions.includes("Quotations_delete")?s("button",{staticClass:"btn btn-danger btn-icon icon-left btn-sm m-1",on:{click:function(e){return t.Remove_Quote()}}},[s("i",{staticClass:"i-Close-Window"}),t._v("\n          "+t._s(t.$t("Del"))+"\n        ")]):t._e()],1)],1),t._v(" "),s("div",{staticClass:"invoice",attrs:{id:"print_Invoice"}},[s("div",{staticClass:"invoice-print"},[s("b-row",{staticClass:"justify-content-md-center"},[s("h4",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("DetailQuote"))+" : "+t._s(t.quote.Ref))])]),t._v(" "),s("hr"),t._v(" "),s("b-row",{staticClass:"mt-5"},[s("b-col",{staticClass:"mb-4",attrs:{md:"4"}},[s("h5",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Customer_Info")))]),t._v(" "),s("div",[t._v(t._s(t.quote.client_name))]),t._v(" "),s("div",[t._v(t._s(t.quote.client_email))]),t._v(" "),s("div",[t._v(t._s(t.quote.client_phone))]),t._v(" "),s("div",[t._v(t._s(t.quote.client_adr))])]),t._v(" "),s("b-col",{staticClass:"mb-4",attrs:{md:"4"}},[s("h5",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Company_Info")))]),t._v(" "),s("div",[t._v(t._s(t.company.CompanyName))]),t._v(" "),s("div",[t._v(t._s(t.company.email))]),t._v(" "),s("div",[t._v(t._s(t.company.CompanyPhone))]),t._v(" "),s("div",[t._v(t._s(t.company.CompanyAdress))])]),t._v(" "),s("b-col",{staticClass:"mb-4",attrs:{md:"4"}},[s("h5",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Quote_Info")))]),t._v(" "),s("div",[t._v(t._s(t.$t("Reference"))+" : "+t._s(t.quote.Ref))]),t._v(" "),s("div",[t._v("\n              "+t._s(t.$t("Status"))+" :\n              "),"sent"==t.quote.statut?s("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(t.$t("Sent")))]):s("span",{staticClass:"badge badge-outline-warning"},[t._v(t._s(t.$t("Pending")))])]),t._v(" "),s("div",[t._v(t._s(t.$t("date"))+" : "+t._s(t.quote.date))]),t._v(" "),s("div",[t._v(t._s(t.$t("warehouse"))+" : "+t._s(t.quote.warehouse))])])],1),t._v(" "),s("b-row",{staticClass:"mt-3"},[s("b-col",{attrs:{md:"12"}},[s("h5",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Order_Summary")))]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-hover table-md"},[s("thead",{staticClass:"bg-gray-300"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("ProductName")))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Net_Unit_Price")))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Quantity")))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("UnitPrice")))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Discount")))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Tax")))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("SubTotal")))])])]),t._v(" "),s("tbody",t._l(t.details,(function(e){return s("tr",[s("td",[s("span",[t._v(t._s(e.code)+" ("+t._s(e.name)+")")]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.is_imei&&null!==e.imei_number,expression:"detail.is_imei && detail.imei_number !==null "}]},[t._v(t._s(t.$t("IMEI_SN"))+" : "+t._s(e.imei_number))])]),t._v(" "),s("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(e.Net_price,3)))]),t._v(" "),s("td",[t._v(t._s(t.formatNumber(e.quantity,2))+" "+t._s(e.unit_sale))]),t._v(" "),s("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(e.price,2)))]),t._v(" "),s("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(e.DiscountNet,2)))]),t._v(" "),s("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(e.taxe,2)))]),t._v(" "),s("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(e.total.toFixed(2)))])])})),0)])])]),t._v(" "),s("div",{staticClass:"offset-md-9 col-md-3 mt-4"},[s("table",{staticClass:"table table-striped table-sm"},[s("tbody",[s("tr",[s("td",{staticClass:"bold"},[t._v(t._s(t.$t("OrderTax")))]),t._v(" "),s("td",[s("span",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.quote.TaxNet.toFixed(2))+" ("+t._s(t.formatNumber(t.quote.tax_rate,2))+" %)")])])]),t._v(" "),s("tr",[s("td",{staticClass:"bold"},[t._v(t._s(t.$t("Discount")))]),t._v(" "),s("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.quote.discount.toFixed(2)))])]),t._v(" "),s("tr",[s("td",{staticClass:"bold"},[t._v(t._s(t.$t("Shipping")))]),t._v(" "),s("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.quote.shipping.toFixed(2)))])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Total")))])]),t._v(" "),s("td",[s("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.quote.GrandTotal))])])])])])])],1),t._v(" "),s("hr",{directives:[{name:"show",rawName:"v-show",value:t.quote.note,expression:"quote.note"}]}),t._v(" "),s("b-row",{staticClass:"mt-4"},[s("b-col",{attrs:{md:"12"}},[s("p",[t._v(t._s(t.quote.note))])])],1)],1)])],1)],1)}),[],!1,null,null,null).exports}}]);