"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6845],{62984:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(87757),s=a.n(r),n=a(74865),i=a.n(n);function o(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(r,s)}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d={metaInfo:{title:"Profile"},data:function(){return{data:new FormData,avatar:"",username:"",isLoading:!0,user:{id:"",firstname:"",lastname:"",username:"",NewPassword:null,email:"",phone:"",avatar:""}}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},(0,a(20629).Se)(["currentUser"])),methods:{Submit_Profile:function(){var e=this;this.$refs.Update_Profile.validate().then((function(t){t?e.Update_Profile():e.makeToast("danger",e.$t("Please_fill_the_form_correctly"),e.$t("Failed"))}))},makeToast:function(e,t,a){this.$root.$bvToast.toast(t,{title:a,variant:e,solid:!0})},getValidationState:function(e){var t=e.dirty,a=e.validated,r=e.valid;return t||a?void 0===r?null:r:null},Get_Profile_Info:function(){var e=this;axios.get("users/Get_Info/Profile").then((function(t){e.user=t.data.user,e.avatar=e.currentUser.avatar,e.username=e.currentUser.username,e.isLoading=!1})).catch((function(t){e.isLoading=!1}))},onFileSelected:function(e){var t,a=this;return(t=s().mark((function t(){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$refs.Avatar.validate(e);case 2:r=t.sent,n=r.valid,a.user.avatar=n?e.target.files[0]:"";case 5:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function i(e){o(n,r,s,i,l,"next",e)}function l(e){o(n,r,s,i,l,"throw",e)}i(void 0)}))})()},Update_Profile:function(){var e=this;i().start(),i().set(.1);var t=this;t.data.append("firstname",t.user.firstname),t.data.append("lastname",t.user.lastname),t.data.append("username",t.user.username),t.data.append("email",t.user.email),t.data.append("NewPassword",t.user.NewPassword),t.data.append("phone",t.user.phone),t.data.append("avatar",t.user.avatar),t.data.append("_method","put"),axios.post("updateProfile/"+t.user.id,t.data).then((function(t){e.makeToast("success",e.$t("Update.TitleProfile"),e.$t("Success")),i().done(),setTimeout((function(){e.Get_Profile_Info()}),500)})).catch((function(e){i().done()}))}},created:function(){this.Get_Profile_Info()}};const c=(0,a(51900).Z)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-content"},[a("breadcumb",{attrs:{page:e.$t("profil"),folder:e.$t("Settings")}}),e._v(" "),e.isLoading?a("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e._e(),e._v(" "),e.isLoading?e._e():a("div",{staticClass:"card user-profile o-hidden mb-30"},[a("div",{staticClass:"header-cover"}),e._v(" "),a("div",{staticClass:"user-info"},[a("img",{staticClass:"profile-picture avatar-lg mb-2",attrs:{src:"/images/avatar/"+e.avatar,alt:""}}),e._v(" "),a("p",{staticClass:"m-0 text-24"},[e._v(e._s(e.username))])]),e._v(" "),a("div",{staticClass:"card-body"},[a("validation-observer",{ref:"Update_Profile"},[a("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.Submit_Profile.apply(null,arguments)}}},[a("b-row",[a("b-col",{attrs:{md:"6",sm:"12"}},[a("validation-provider",{attrs:{name:"Firstname",rules:{required:!0,min:4,max:20}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:e.$t("Firstname")+" *"}},[a("b-form-input",{attrs:{state:e.getValidationState(t),"aria-describedby":"Firstname-feedback",label:"Firstname"},model:{value:e.user.firstname,callback:function(t){e.$set(e.user,"firstname",t)},expression:"user.firstname"}}),e._v(" "),a("b-form-invalid-feedback",{attrs:{id:"Firstname-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,2648461320)})],1),e._v(" "),a("b-col",{attrs:{md:"6",sm:"12"}},[a("validation-provider",{attrs:{name:"lastname",rules:{required:!0,min:4,max:20}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:e.$t("lastname")+" *"}},[a("b-form-input",{attrs:{state:e.getValidationState(t),"aria-describedby":"lastname-feedback",label:"lastname"},model:{value:e.user.lastname,callback:function(t){e.$set(e.user,"lastname",t)},expression:"user.lastname"}}),e._v(" "),a("b-form-invalid-feedback",{attrs:{id:"lastname-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,3016559224)})],1),e._v(" "),a("b-col",{attrs:{md:"6",sm:"12"}},[a("validation-provider",{attrs:{name:"username",rules:{required:!0,min:4,max:20}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:e.$t("username")+" *"}},[a("b-form-input",{attrs:{state:e.getValidationState(t),"aria-describedby":"username-feedback",label:"username"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),e._v(" "),a("b-form-invalid-feedback",{attrs:{id:"username-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,2089383363)})],1),e._v(" "),a("b-col",{attrs:{md:"6",sm:"12"}},[a("validation-provider",{attrs:{name:"Phone",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:e.$t("Phone")+" *"}},[a("b-form-input",{attrs:{state:e.getValidationState(t),"aria-describedby":"Phone-feedback",label:"Phone"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}),e._v(" "),a("b-form-invalid-feedback",{attrs:{id:"Phone-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,2094202729)})],1),e._v(" "),a("b-col",{attrs:{md:"6",sm:"12"}},[a("validation-provider",{attrs:{name:"Email",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:e.$t("Email")+" *"}},[a("b-form-input",{attrs:{state:e.getValidationState(t),"aria-describedby":"Email-feedback",label:"Email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),e._v(" "),a("b-form-invalid-feedback",{attrs:{id:"Email-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,2639721465)})],1),e._v(" "),a("b-col",{attrs:{md:"6",sm:"12"}},[a("validation-provider",{ref:"Avatar",attrs:{name:"Avatar",rules:"mimes:image/*|size:200"},scopedSlots:e._u([{key:"default",fn:function(t){t.validate;var r=t.valid,s=t.errors;return a("b-form-group",{attrs:{label:e.$t("UserImage")}},[a("input",{class:{"is-invalid":!!s.length},attrs:{state:!s[0]&&(!!r||null),label:"Choose Avatar",type:"file"},on:{change:e.onFileSelected}}),e._v(" "),a("b-form-invalid-feedback",{attrs:{id:"Avatar-feedback"}},[e._v(e._s(s[0]))])],1)}}],null,!1,2117094513)})],1),e._v(" "),a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{name:"New password",rules:{min:6,max:14}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:e.$t("Newpassword")}},[a("b-form-input",{attrs:{state:e.getValidationState(t),"aria-describedby":"Nawpassword-feedback",placeholder:e.$t("LeaveBlank"),label:"New password"},model:{value:e.user.NewPassword,callback:function(t){e.$set(e.user,"NewPassword",t)},expression:"user.NewPassword"}}),e._v(" "),a("b-form-invalid-feedback",{attrs:{id:"Nawpassword-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,1010016937)})],1),e._v(" "),a("b-col",{staticClass:"mt-3",attrs:{md:"12"}},[a("b-button",{attrs:{variant:"primary",type:"submit"}},[e._v(e._s(e.$t("submit")))])],1)],1)],1)],1)],1)])],1)}),[],!1,null,null,null).exports}}]);